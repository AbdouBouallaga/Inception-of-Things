2022-01-07_10:42:48.02660 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"Puma starting in cluster mode..."}
2022-01-07_10:42:48.02698 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"* Puma version: 5.5.2 (ruby 2.7.5-p203) (\"Zawgyi\")"}
2022-01-07_10:42:48.02720 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*  Min threads: 4"}
2022-01-07_10:42:48.02744 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*  Max threads: 4"}
2022-01-07_10:42:48.02777 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*  Environment: production"}
2022-01-07_10:42:48.02803 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*   Master PID: 306"}
2022-01-07_10:42:48.02835 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*      Workers: 2"}
2022-01-07_10:42:48.02997 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"*     Restarts: (✔) hot (✖) phased"}
2022-01-07_10:42:48.03050 {"timestamp":"2022-01-07T10:42:48.026Z","pid":306,"message":"* Preloading application"}
2022-01-07_10:43:13.66118 {"timestamp":"2022-01-07T10:43:13.660Z","pid":306,"message":"! Unable to load application: ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up\n"}
2022-01-07_10:43:13.66210 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2022-01-07_10:43:13.66242 ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up
2022-01-07_10:43:13.66271 
2022-01-07_10:43:13.66305   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'
2022-01-07_10:43:13.66331   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
2022-01-07_10:43:13.66358   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
2022-01-07_10:43:13.66389   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
2022-01-07_10:43:13.66416   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
2022-01-07_10:43:13.66438   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
2022-01-07_10:43:13.66469   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
2022-01-07_10:43:13.66511   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
2022-01-07_10:43:13.66540   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
2022-01-07_10:43:13.66575   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
2022-01-07_10:43:13.66596   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
2022-01-07_10:43:13.66704   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:327:in `retrieve_connection'
2022-01-07_10:43:13.66733   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:283:in `connection'
2022-01-07_10:43:13.66779   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/model_schema.rb:380:in `table_exists?'
2022-01-07_10:43:13.66803   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:95:in `get_primary_key'
2022-01-07_10:43:13.66829   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:83:in `reset_primary_key'
2022-01-07_10:43:13.66854   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:71:in `primary_key'
2022-01-07_10:43:13.66876   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/delegation.rb:93:in `primary_key'
2022-01-07_10:43:13.66899   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:579:in `ordered_relation'
2022-01-07_10:43:13.66923   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:150:in `last'
2022-01-07_10:43:13.66947   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/querying.rb:22:in `last'
2022-01-07_10:43:13.66973   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:19:in `current_without_cache'
2022-01-07_10:43:13.66994   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:63:in `rescue in current'
2022-01-07_10:43:13.67018   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2022-01-07_10:43:13.67041   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:60:in `uncached_application_settings'
2022-01-07_10:43:13.67089   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:42:in `ensure_application_settings!'
2022-01-07_10:43:13.67123   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `block in current_application_settings'
2022-01-07_10:43:13.67151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2022-01-07_10:43:13.67183   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2022-01-07_10:43:13.67218   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `current_application_settings'
2022-01-07_10:43:13.67241   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:32:in `method_missing'
2022-01-07_10:43:13.67265   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:98:in `prometheus_metrics_enabled_unmemoized'
2022-01-07_10:43:13.67292   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:24:in `block in prometheus_metrics_enabled?'
2022-01-07_10:43:13.67313   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:28:in `strong_memoize'
2022-01-07_10:43:13.67363   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:23:in `prometheus_metrics_enabled?'
2022-01-07_10:43:13.67396   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:49:in `<top (required)>'
2022-01-07_10:43:13.67416   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `load'
2022-01-07_10:43:13.67443   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `block in load_config_initializer'
2022-01-07_10:43:13.67504   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb:205:in `instrument'
2022-01-07_10:43:13.67540   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:680:in `load_config_initializer'
2022-01-07_10:43:13.67564   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:634:in `block (2 levels) in <class:Engine>'
2022-01-07_10:43:13.67588   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `each'
2022-01-07_10:43:13.67622   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `block in <class:Engine>'
2022-01-07_10:43:13.67654   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `instance_exec'
2022-01-07_10:43:13.67680   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `run'
2022-01-07_10:43:13.67706   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2022-01-07_10:43:13.67742   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:228:in `block in tsort_each'
2022-01-07_10:43:13.67778   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2022-01-07_10:43:13.67812   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2022-01-07_10:43:13.67863   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:431:in `each_strongly_connected_component_from'
2022-01-07_10:43:13.67899   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2022-01-07_10:43:13.67942   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `each'
2022-01-07_10:43:13.67966   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2022-01-07_10:43:13.67991   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `call'
2022-01-07_10:43:13.68017   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `each_strongly_connected_component_from'
2022-01-07_10:43:13.68066   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:349:in `block in each_strongly_connected_component'
2022-01-07_10:43:13.68100   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each'
2022-01-07_10:43:13.68141   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `call'
2022-01-07_10:43:13.68167   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each_strongly_connected_component'
2022-01-07_10:43:13.68189   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:226:in `tsort_each'
2022-01-07_10:43:13.68213   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:205:in `tsort_each'
2022-01-07_10:43:13.68236   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:60:in `run_initializers'
2022-01-07_10:43:13.68286   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/application.rb:391:in `initialize!'
2022-01-07_10:43:13.68309   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:7:in `<top (required)>'
2022-01-07_10:43:13.68333   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `require'
2022-01-07_10:43:13.68361   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `block in <main>'
2022-01-07_10:43:13.68408   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'
2022-01-07_10:43:13.68437   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'
2022-01-07_10:43:13.68464   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'
2022-01-07_10:43:13.68491   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'
2022-01-07_10:43:13.68536   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:345:in `load_rackup'
2022-01-07_10:43:13.68602   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:267:in `app'
2022-01-07_10:43:13.68646   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/runner.rb:149:in `load_and_bind'
2022-01-07_10:43:13.68714   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cluster.rb:339:in `run'
2022-01-07_10:43:13.68740   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/launcher.rb:181:in `run'
2022-01-07_10:43:13.68798   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cli.rb:80:in `run'
2022-01-07_10:43:13.68826   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/bin/puma:10:in `<top (required)>'
2022-01-07_10:43:13.68851   /opt/gitlab/embedded/bin/puma:23:in `load'
2022-01-07_10:43:13.68876   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2022-01-07_10:43:14.93545 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"Puma starting in cluster mode..."}
2022-01-07_10:43:14.93571 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"* Puma version: 5.5.2 (ruby 2.7.5-p203) (\"Zawgyi\")"}
2022-01-07_10:43:14.93594 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*  Min threads: 4"}
2022-01-07_10:43:14.93617 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*  Max threads: 4"}
2022-01-07_10:43:14.93643 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*  Environment: production"}
2022-01-07_10:43:14.93668 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*   Master PID: 516"}
2022-01-07_10:43:14.93684 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*      Workers: 2"}
2022-01-07_10:43:14.93705 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"*     Restarts: (✔) hot (✖) phased"}
2022-01-07_10:43:14.93725 {"timestamp":"2022-01-07T10:43:14.935Z","pid":516,"message":"* Preloading application"}
2022-01-07_10:43:38.80185 {"timestamp":"2022-01-07T10:43:38.801Z","pid":516,"message":"! Unable to load application: ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up\n"}
2022-01-07_10:43:38.80312 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2022-01-07_10:43:38.80371 ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up
2022-01-07_10:43:38.80408 
2022-01-07_10:43:38.80438   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'
2022-01-07_10:43:38.80472   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
2022-01-07_10:43:38.80501   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
2022-01-07_10:43:38.80533   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
2022-01-07_10:43:38.80572   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
2022-01-07_10:43:38.80619   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
2022-01-07_10:43:38.80649   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
2022-01-07_10:43:38.80688   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
2022-01-07_10:43:38.80722   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
2022-01-07_10:43:38.80762   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
2022-01-07_10:43:38.80792   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
2022-01-07_10:43:38.80814   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:327:in `retrieve_connection'
2022-01-07_10:43:38.80853   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:283:in `connection'
2022-01-07_10:43:38.80885   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/model_schema.rb:380:in `table_exists?'
2022-01-07_10:43:38.80920   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:95:in `get_primary_key'
2022-01-07_10:43:38.80952   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:83:in `reset_primary_key'
2022-01-07_10:43:38.80994   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:71:in `primary_key'
2022-01-07_10:43:38.81033   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/delegation.rb:93:in `primary_key'
2022-01-07_10:43:38.81070   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:579:in `ordered_relation'
2022-01-07_10:43:38.81102   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:150:in `last'
2022-01-07_10:43:38.81138   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/querying.rb:22:in `last'
2022-01-07_10:43:38.81173   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:19:in `current_without_cache'
2022-01-07_10:43:38.81235   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:63:in `rescue in current'
2022-01-07_10:43:38.81269   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2022-01-07_10:43:38.81308   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:60:in `uncached_application_settings'
2022-01-07_10:43:38.81350   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:42:in `ensure_application_settings!'
2022-01-07_10:43:38.81382   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `block in current_application_settings'
2022-01-07_10:43:38.81416   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2022-01-07_10:43:38.81449   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2022-01-07_10:43:38.81493   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `current_application_settings'
2022-01-07_10:43:38.81540   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:32:in `method_missing'
2022-01-07_10:43:38.81578   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:98:in `prometheus_metrics_enabled_unmemoized'
2022-01-07_10:43:38.81626   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:24:in `block in prometheus_metrics_enabled?'
2022-01-07_10:43:38.81659   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:28:in `strong_memoize'
2022-01-07_10:43:38.81690   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:23:in `prometheus_metrics_enabled?'
2022-01-07_10:43:38.81721   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:49:in `<top (required)>'
2022-01-07_10:43:38.81748   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `load'
2022-01-07_10:43:38.81787   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `block in load_config_initializer'
2022-01-07_10:43:38.81826   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb:205:in `instrument'
2022-01-07_10:43:38.81870   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:680:in `load_config_initializer'
2022-01-07_10:43:38.81899   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:634:in `block (2 levels) in <class:Engine>'
2022-01-07_10:43:38.81945   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `each'
2022-01-07_10:43:38.81991   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `block in <class:Engine>'
2022-01-07_10:43:38.82023   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `instance_exec'
2022-01-07_10:43:38.82071   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `run'
2022-01-07_10:43:38.82111   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2022-01-07_10:43:38.82152   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:228:in `block in tsort_each'
2022-01-07_10:43:38.82182   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2022-01-07_10:43:38.82223   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2022-01-07_10:43:38.82264   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:431:in `each_strongly_connected_component_from'
2022-01-07_10:43:38.82304   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2022-01-07_10:43:38.82345   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `each'
2022-01-07_10:43:38.82564   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2022-01-07_10:43:38.82605   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `call'
2022-01-07_10:43:38.82651   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `each_strongly_connected_component_from'
2022-01-07_10:43:38.82713   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:349:in `block in each_strongly_connected_component'
2022-01-07_10:43:38.82774   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each'
2022-01-07_10:43:38.82820   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `call'
2022-01-07_10:43:38.82870   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each_strongly_connected_component'
2022-01-07_10:43:38.82913   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:226:in `tsort_each'
2022-01-07_10:43:38.82954   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:205:in `tsort_each'
2022-01-07_10:43:38.83007   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:60:in `run_initializers'
2022-01-07_10:43:38.83059   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/application.rb:391:in `initialize!'
2022-01-07_10:43:38.83094   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:7:in `<top (required)>'
2022-01-07_10:43:38.83131   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `require'
2022-01-07_10:43:38.83168   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `block in <main>'
2022-01-07_10:43:38.83204   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'
2022-01-07_10:43:38.83247   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'
2022-01-07_10:43:38.83288   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'
2022-01-07_10:43:38.83332   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'
2022-01-07_10:43:38.83375   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:345:in `load_rackup'
2022-01-07_10:43:38.83420   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:267:in `app'
2022-01-07_10:43:38.83452   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/runner.rb:149:in `load_and_bind'
2022-01-07_10:43:38.83485   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cluster.rb:339:in `run'
2022-01-07_10:43:38.83521   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/launcher.rb:181:in `run'
2022-01-07_10:43:38.83554   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cli.rb:80:in `run'
2022-01-07_10:43:38.83592   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/bin/puma:10:in `<top (required)>'
2022-01-07_10:43:38.83628   /opt/gitlab/embedded/bin/puma:23:in `load'
2022-01-07_10:43:38.83666   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2022-01-07_10:43:40.32631 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"Puma starting in cluster mode..."}
2022-01-07_10:43:40.32667 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"* Puma version: 5.5.2 (ruby 2.7.5-p203) (\"Zawgyi\")"}
2022-01-07_10:43:40.32697 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*  Min threads: 4"}
2022-01-07_10:43:40.32719 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*  Max threads: 4"}
2022-01-07_10:43:40.32742 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*  Environment: production"}
2022-01-07_10:43:40.32767 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*   Master PID: 564"}
2022-01-07_10:43:40.32783 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*      Workers: 2"}
2022-01-07_10:43:40.32807 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"*     Restarts: (✔) hot (✖) phased"}
2022-01-07_10:43:40.32827 {"timestamp":"2022-01-07T10:43:40.326Z","pid":564,"message":"* Preloading application"}
2022-01-07_10:44:06.78906 {"timestamp":"2022-01-07T10:44:06.788Z","pid":564,"message":"! Unable to load application: ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up\n"}
2022-01-07_10:44:06.78986 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2022-01-07_10:44:06.79017 ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up
2022-01-07_10:44:06.79049 
2022-01-07_10:44:06.79084   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'
2022-01-07_10:44:06.79113   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
2022-01-07_10:44:06.79139   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
2022-01-07_10:44:06.79168   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
2022-01-07_10:44:06.79191   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
2022-01-07_10:44:06.79208   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
2022-01-07_10:44:06.79259   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
2022-01-07_10:44:06.79293   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
2022-01-07_10:44:06.79328   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
2022-01-07_10:44:06.79350   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
2022-01-07_10:44:06.79381   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
2022-01-07_10:44:06.79406   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:327:in `retrieve_connection'
2022-01-07_10:44:06.79432   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:283:in `connection'
2022-01-07_10:44:06.79458   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/model_schema.rb:380:in `table_exists?'
2022-01-07_10:44:06.79485   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:95:in `get_primary_key'
2022-01-07_10:44:06.79510   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:83:in `reset_primary_key'
2022-01-07_10:44:06.79536   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:71:in `primary_key'
2022-01-07_10:44:06.79561   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/delegation.rb:93:in `primary_key'
2022-01-07_10:44:06.79585   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:579:in `ordered_relation'
2022-01-07_10:44:06.79609   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:150:in `last'
2022-01-07_10:44:06.79636   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/querying.rb:22:in `last'
2022-01-07_10:44:06.79662   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:19:in `current_without_cache'
2022-01-07_10:44:06.79687   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:63:in `rescue in current'
2022-01-07_10:44:06.79711   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2022-01-07_10:44:06.79736   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:60:in `uncached_application_settings'
2022-01-07_10:44:06.79762   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:42:in `ensure_application_settings!'
2022-01-07_10:44:06.79787   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `block in current_application_settings'
2022-01-07_10:44:06.79812   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2022-01-07_10:44:06.79836   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2022-01-07_10:44:06.79861   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `current_application_settings'
2022-01-07_10:44:06.79887   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:32:in `method_missing'
2022-01-07_10:44:06.79911   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:98:in `prometheus_metrics_enabled_unmemoized'
2022-01-07_10:44:06.79935   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:24:in `block in prometheus_metrics_enabled?'
2022-01-07_10:44:06.79960   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:28:in `strong_memoize'
2022-01-07_10:44:06.79985   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:23:in `prometheus_metrics_enabled?'
2022-01-07_10:44:06.80015   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:49:in `<top (required)>'
2022-01-07_10:44:06.80040   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `load'
2022-01-07_10:44:06.80065   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `block in load_config_initializer'
2022-01-07_10:44:06.80091   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb:205:in `instrument'
2022-01-07_10:44:06.80114   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:680:in `load_config_initializer'
2022-01-07_10:44:06.80140   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:634:in `block (2 levels) in <class:Engine>'
2022-01-07_10:44:06.80164   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `each'
2022-01-07_10:44:06.80192   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `block in <class:Engine>'
2022-01-07_10:44:06.80223   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `instance_exec'
2022-01-07_10:44:06.80249   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `run'
2022-01-07_10:44:06.80277   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2022-01-07_10:44:06.80302   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:228:in `block in tsort_each'
2022-01-07_10:44:06.80326   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2022-01-07_10:44:06.80351   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2022-01-07_10:44:06.80375   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:431:in `each_strongly_connected_component_from'
2022-01-07_10:44:06.80399   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2022-01-07_10:44:06.80424   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `each'
2022-01-07_10:44:06.80456   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2022-01-07_10:44:06.80477   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `call'
2022-01-07_10:44:06.80501   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `each_strongly_connected_component_from'
2022-01-07_10:44:06.80537   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:349:in `block in each_strongly_connected_component'
2022-01-07_10:44:06.80561   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each'
2022-01-07_10:44:06.80586   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `call'
2022-01-07_10:44:06.80618   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each_strongly_connected_component'
2022-01-07_10:44:06.80636   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:226:in `tsort_each'
2022-01-07_10:44:06.80654   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:205:in `tsort_each'
2022-01-07_10:44:06.80673   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:60:in `run_initializers'
2022-01-07_10:44:06.80692   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/application.rb:391:in `initialize!'
2022-01-07_10:44:06.80779   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:7:in `<top (required)>'
2022-01-07_10:44:06.80807   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `require'
2022-01-07_10:44:06.80833   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `block in <main>'
2022-01-07_10:44:06.80857   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'
2022-01-07_10:44:06.80887   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'
2022-01-07_10:44:06.80913   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'
2022-01-07_10:44:06.80938   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'
2022-01-07_10:44:06.80966   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:345:in `load_rackup'
2022-01-07_10:44:06.80993   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:267:in `app'
2022-01-07_10:44:06.81018   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/runner.rb:149:in `load_and_bind'
2022-01-07_10:44:06.81043   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cluster.rb:339:in `run'
2022-01-07_10:44:06.81068   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/launcher.rb:181:in `run'
2022-01-07_10:44:06.81093   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cli.rb:80:in `run'
2022-01-07_10:44:06.81124   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/bin/puma:10:in `<top (required)>'
2022-01-07_10:44:06.81150   /opt/gitlab/embedded/bin/puma:23:in `load'
2022-01-07_10:44:06.81176   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2022-01-07_10:44:08.03164 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"Puma starting in cluster mode..."}
2022-01-07_10:44:08.03190 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"* Puma version: 5.5.2 (ruby 2.7.5-p203) (\"Zawgyi\")"}
2022-01-07_10:44:08.03217 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*  Min threads: 4"}
2022-01-07_10:44:08.03242 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*  Max threads: 4"}
2022-01-07_10:44:08.03269 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*  Environment: production"}
2022-01-07_10:44:08.03294 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*   Master PID: 620"}
2022-01-07_10:44:08.03319 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*      Workers: 2"}
2022-01-07_10:44:08.03345 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"*     Restarts: (✔) hot (✖) phased"}
2022-01-07_10:44:08.03371 {"timestamp":"2022-01-07T10:44:08.031Z","pid":620,"message":"* Preloading application"}
2022-01-07_10:44:33.80366 {"timestamp":"2022-01-07T10:44:33.803Z","pid":620,"message":"! Unable to load application: ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up\n"}
2022-01-07_10:44:33.80450 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2022-01-07_10:44:33.80468 ActiveRecord::ConnectionNotEstablished: FATAL:  the database system is starting up
2022-01-07_10:44:33.80497 
2022-01-07_10:44:33.80520   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'
2022-01-07_10:44:33.80555   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
2022-01-07_10:44:33.80574   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
2022-01-07_10:44:33.80607   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
2022-01-07_10:44:33.80630   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
2022-01-07_10:44:33.80653   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
2022-01-07_10:44:33.80699   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
2022-01-07_10:44:33.80718   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
2022-01-07_10:44:33.80766   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
2022-01-07_10:44:33.80787   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
2022-01-07_10:44:33.80814   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
2022-01-07_10:44:33.80835   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:327:in `retrieve_connection'
2022-01-07_10:44:33.80856   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/connection_handling.rb:283:in `connection'
2022-01-07_10:44:33.80882   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/model_schema.rb:380:in `table_exists?'
2022-01-07_10:44:33.80907   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:95:in `get_primary_key'
2022-01-07_10:44:33.80938   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:83:in `reset_primary_key'
2022-01-07_10:44:33.80967   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/attribute_methods/primary_key.rb:71:in `primary_key'
2022-01-07_10:44:33.80998   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/delegation.rb:93:in `primary_key'
2022-01-07_10:44:33.81014   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:579:in `ordered_relation'
2022-01-07_10:44:33.81034   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/relation/finder_methods.rb:150:in `last'
2022-01-07_10:44:33.81066   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activerecord-6.1.4.1/lib/active_record/querying.rb:22:in `last'
2022-01-07_10:44:33.81092   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:19:in `current_without_cache'
2022-01-07_10:44:33.81119   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:63:in `rescue in current'
2022-01-07_10:44:33.81144   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2022-01-07_10:44:33.81171   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:60:in `uncached_application_settings'
2022-01-07_10:44:33.81194   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:42:in `ensure_application_settings!'
2022-01-07_10:44:33.81224   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `block in current_application_settings'
2022-01-07_10:44:33.81249   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2022-01-07_10:44:33.81275   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2022-01-07_10:44:33.81302   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:15:in `current_application_settings'
2022-01-07_10:44:33.81327   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:32:in `method_missing'
2022-01-07_10:44:33.81355   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:98:in `prometheus_metrics_enabled_unmemoized'
2022-01-07_10:44:33.81381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:24:in `block in prometheus_metrics_enabled?'
2022-01-07_10:44:33.81405   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:28:in `strong_memoize'
2022-01-07_10:44:33.81430   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:23:in `prometheus_metrics_enabled?'
2022-01-07_10:44:33.81470   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:49:in `<top (required)>'
2022-01-07_10:44:33.81493   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `load'
2022-01-07_10:44:33.81518   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:681:in `block in load_config_initializer'
2022-01-07_10:44:33.81543   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/activesupport-6.1.4.1/lib/active_support/notifications.rb:205:in `instrument'
2022-01-07_10:44:33.81568   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:680:in `load_config_initializer'
2022-01-07_10:44:33.81586   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:634:in `block (2 levels) in <class:Engine>'
2022-01-07_10:44:33.81609   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `each'
2022-01-07_10:44:33.81632   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/engine.rb:633:in `block in <class:Engine>'
2022-01-07_10:44:33.81664   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `instance_exec'
2022-01-07_10:44:33.81689   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:32:in `run'
2022-01-07_10:44:33.81711   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2022-01-07_10:44:33.81735   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:228:in `block in tsort_each'
2022-01-07_10:44:33.81761   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2022-01-07_10:44:33.81789   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2022-01-07_10:44:33.81814   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:431:in `each_strongly_connected_component_from'
2022-01-07_10:44:33.81838   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2022-01-07_10:44:33.81867   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `each'
2022-01-07_10:44:33.81893   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2022-01-07_10:44:33.81922   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `call'
2022-01-07_10:44:33.81941   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:415:in `each_strongly_connected_component_from'
2022-01-07_10:44:33.81970   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:349:in `block in each_strongly_connected_component'
2022-01-07_10:44:33.82001   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each'
2022-01-07_10:44:33.82026   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `call'
2022-01-07_10:44:33.82050   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:347:in `each_strongly_connected_component'
2022-01-07_10:44:33.82070   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:226:in `tsort_each'
2022-01-07_10:44:33.82089   /opt/gitlab/embedded/lib/ruby/2.7.0/tsort.rb:205:in `tsort_each'
2022-01-07_10:44:33.82113   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/initializable.rb:60:in `run_initializers'
2022-01-07_10:44:33.82138   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/railties-6.1.4.1/lib/rails/application.rb:391:in `initialize!'
2022-01-07_10:44:33.82162   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:7:in `<top (required)>'
2022-01-07_10:44:33.82186   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `require'
2022-01-07_10:44:33.82204   /opt/gitlab/embedded/service/gitlab-rails/config.ru:5:in `block in <main>'
2022-01-07_10:44:33.82241   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `eval'
2022-01-07_10:44:33.82270   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:116:in `new_from_string'
2022-01-07_10:44:33.82291   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:105:in `load_file'
2022-01-07_10:44:33.82316   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-2.2.3/lib/rack/builder.rb:66:in `parse_file'
2022-01-07_10:44:33.82342   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:345:in `load_rackup'
2022-01-07_10:44:33.82372   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/configuration.rb:267:in `app'
2022-01-07_10:44:33.82390   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/runner.rb:149:in `load_and_bind'
2022-01-07_10:44:33.82429   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cluster.rb:339:in `run'
2022-01-07_10:44:33.82460   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/launcher.rb:181:in `run'
2022-01-07_10:44:33.82482   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/lib/puma/cli.rb:80:in `run'
2022-01-07_10:44:33.82510   /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/puma-5.5.2/bin/puma:10:in `<top (required)>'
2022-01-07_10:44:33.82532   /opt/gitlab/embedded/bin/puma:23:in `load'
2022-01-07_10:44:33.82560   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2022-01-07_10:44:34.96278 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"Puma starting in cluster mode..."}
2022-01-07_10:44:34.96310 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"* Puma version: 5.5.2 (ruby 2.7.5-p203) (\"Zawgyi\")"}
2022-01-07_10:44:34.96332 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*  Min threads: 4"}
2022-01-07_10:44:34.96360 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*  Max threads: 4"}
2022-01-07_10:44:34.96385 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*  Environment: production"}
2022-01-07_10:44:34.96416 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*   Master PID: 733"}
2022-01-07_10:44:34.96441 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*      Workers: 2"}
2022-01-07_10:44:34.96461 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"*     Restarts: (✔) hot (✖) phased"}
2022-01-07_10:44:34.96487 {"timestamp":"2022-01-07T10:44:34.962Z","pid":733,"message":"* Preloading application"}
2022-01-07_10:45:29.56260 {"timestamp":"2022-01-07T10:45:29.562Z","pid":733,"message":"* Listening on unix:///var/opt/gitlab/gitlab-rails/sockets/gitlab.socket"}
2022-01-07_10:45:29.56379 {"timestamp":"2022-01-07T10:45:29.562Z","pid":733,"message":"* Listening on http://127.0.0.1:8080"}
2022-01-07_10:45:29.56419 {"timestamp":"2022-01-07T10:45:29.563Z","pid":733,"message":"! WARNING: Detected 1 Thread(s) started in app boot:"}
2022-01-07_10:45:29.56459 {"timestamp":"2022-01-07T10:45:29.563Z","pid":733,"message":"! #\u003cThread:0x00007f39972076c8 /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-timeout-0.5.2/lib/rack/timeout/support/scheduler.rb:73 sleep\u003e - /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/rack-timeout-0.5.2/lib/rack/timeout/support/scheduler.rb:91:in `sleep'"}
2022-01-07_10:45:29.56514 {"timestamp":"2022-01-07T10:45:29.563Z","pid":733,"message":"Use Ctrl-C to stop"}
